# 艹，pytest配置文件 - 测试框架核心配置
# pytest configuration - Core test framework settings

[pytest]
# 测试文件匹配模式 / Test file patterns
python_files = test_*.py *_test.py
# 测试类匹配模式 / Test class patterns
python_classes = Test*
# 测试函数匹配模式 / Test function patterns
python_functions = test_*

# 测试目录 / Test directories
testpaths = tests

# 异步测试模式 / Async test mode
asyncio_mode = auto

# 输出选项 / Output options
addopts =
    # 详细输出 / Verbose output
    -v
    # 显示本地变量 / Show local variables on failure
    -l
    # 显示打印内容 / Show print statements
    -s
    # 覆盖率报告 / Coverage report
    --cov=.
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=60
    # 忽略的目录 / Ignore directories
    --ignore=venv
    --ignore=__pycache__
    --ignore=.pytest_cache

# 标记 / Markers
markers =
    unit: Unit tests
    integration: Integration tests
    slow: Slow running tests
    crawl: Crawl-related tests (requires network)

# 警告设置 / Warning settings
filterwarnings =
    # 忽略特定的警告 / Ignore specific warnings
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# 日志配置 / Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
